# ChatOps with Webex API

Chatbots allow engineers to take a conversational approach to operations. It allows for tighter collaboration by having alerts come into the same chat system that the user leverage every day already. 

Chatbots can be:
1. Notifiers
2. Controllers
3. Personal Assistants

Webex requires creating a token for the chatbot to use in order to authenticate to the system. The authorization type that it uses is f"Bearer {bearer_token}" with a content type of json.

`
    bearer_token = 'ZTZhZmJi...d65305c2ce82'
    base_url = 'https://webexapis.com/v1/'
    headers = {
        "Authorization": f"Bearer {bearer_token}",
        "Content-Type": "application/json"
    }
    result = requests.get(f'{base_url}/<function>', headers=headers)
`

A chatops will typically serve as a middleware betweeen another application and the chat software. For example, you can have events from an NMS like Zabbix get sent to the chatops program which will forward them to the chat system for collaboration and resolution. Or you can have a system like Ansible just send a status message to a chat room. 

The webex uri to post a message to a chat room is
''"https://api.ciscospark.com/v1/messages/" with the room id and and the message in the data/body (json) of the request and the auth token as a bearer token in the headers. 